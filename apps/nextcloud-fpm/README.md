# Environment Variables

| Variable                          | Description                                                                             |            App(s)             |                                             Config Key(s)                                              |              Default               |                  Example                   |
| --------------------------------- | --------------------------------------------------------------------------------------- | :---------------------------: | :----------------------------------------------------------------------------------------------------: | :--------------------------------: | :----------------------------------------: |
| `NX_RUN_MAINTENANCE`            | Runs maintenance scripts                                                                |                               |                                                                                                        |               `true`               |                  `false`                   |
| `NX_TUNE_FPM`                   | Creates a tune file for PHP-FPM                                                         |                               |                                                                                                        |               `true`               |                  `false`                   |
| `NX_PHP_MAX_CHILDREN`           | Maximum number of child processes                                                       |                               |                                                                                                        |                `20`                |                    `50`                    |
| `NX_PHP_START_SERVERS`          | Number of child processes created on startup                                            |                               |                                                                                                        |                `5`                 |                    `10`                    |
| `NX_PHP_MIN_SPARE_SERVERS`      | Minimum number of spare child processes                                                 |                               |                                                                                                        |                `5`                 |                    `10`                    |
| `NX_PHP_MAX_SPARE_SERVERS`      | Maximum number of spare child processes                                                 |                               |                                                                                                        |                `15`                |                    `20`                    |
| `NX_NOTIFY_PUSH`                | Enable Nextcloud Push Notifications                                                     |         `notify_push`         |                                       See `NX_NOTIFY_PUSH_URL`                                       |               `true`               |                  `false`                   |
| `NX_NOTIFY_PUSH_URL`            | Nextcloud Push Notifications URL                                                        |         `notify_push`         |                                            `base_endpoint`                                             |                `""`                |      `https://cloud.example.com/push`      |
| `NX_IMAGINARY`                  | Enable Imaginary                                                                        |           `system`            |                                        `preview_imaginary_url`                                         |               `true`               |                  `false`                   |
| `NX_PREVIEWS`                   | Enable Previews (Forced enabled if Imaginary is enabled)                                | `system` / `previewgenerator` | `system:enable_previews`, `system:enablePreviewProviders` and see `NX_PREVIEW_`, `NX_JPEG_QUALITY` |               `true`               |                  `false`                   |
| `NX_PREVIEW_PROVIDERS`          | Space Separated list of Preview providers (Imaginary is added automatically if enabled) |           `system`            |                                       `enabledPreviewProviders`                                        |                `""`                |               `JPEG PNG BPM`               |
| `NX_ACTIVITY_EXPIRE_DAYS`       | Expire days for activity app                                                            |           `system`            |                                         `activity_expire_days`                                         |                `90`                |                    `60`                    |
| `NX_TRASH_RETENTION`            | Retention time for deleted files                                                        |           `system`            |                                    `trashbin_retention_obligation`                                     |               `auto`               |                  `30,60`                   |
| `NX_VERSION_RETENTION`          | Retention time for old versions                                                         |           `system`            |                                    `versions_retention_obligation`                                     |               `auto`               |                  `30,60`                   |
| `NX_PREVIEW_MAX_X`              | Maximum width of preview image                                                          |           `system`            |                                            `preview_max_x`                                             |               `2048`               |                   `1024`                   |
| `NX_PREVIEW_MAX_Y`              | Maximum height of preview image                                                         |           `system`            |                                            `preview_max_y`                                             |               `2048`               |                   `1024`                   |
| `NX_PREVIEW_MAX_MEMORY`         | Maximum memory for preview image                                                        |           `system`            |                                          `preview_max_memory`                                          |               `1024`               |                   `512`                    |
| `NX_PREVIEW_MAX_FILESIZE_IMAGE` | Maximum file size for image previews                                                    |           `system`            |                                      `preview_max_filesize_image`                                      |                `50`                |                    `25`                    |
| `NX_JPEG_QUALITY`               | JPEG Quality for previews                                                               | `system` / `previewgenerator` |                             `system:jpeg_quality` / `preview:jpeg_quality`                             |                `60`                |                    `80`                    |
| `NX_PREVIEW_HEIGHT_SIZES`       | Preview height sizes                                                                    |      `previewgenerator`       |                                             `heightSizes`                                              |               `256`                |                   `512`                    |
| `NX_PREVIEW_WIDTH_SIZES`        | Preview width sizes                                                                     |      `previewgenerator`       |                                              `widthSizes`                                              |             `256 384`              |                 `512 1024`                 |
| `NX_PREVIEW_SQUARE_SIZES`       | Preview square sizes                                                                    |      `previewgenerator`       |                                             `squareSizes`                                              |              `32 256`              |                  `64 512`                  |
| `NX_DEFAULT_PHONE_REGION`       | Default phone region                                                                    |           `system`            |                                         `default_phone_region`                                         |                `GR`                |                    `US`                    |
| `NX_SHARED_FOLDER_NAME`         | Name of shared folder                                                                   |           `system`            |                                          `share_folder_name`                                           |              `Shared`              |                  `Common`                  |
| `NX_MAX_CHUNK_SIZE`             | Maximum chunk size                                                                      |            `files`            |                                            `max_chunk_size`                                            |             `10485760`             |                `104857600`                 |
| `NX_LOG_LEVEL`                  | Log level                                                                               |           `system`            |                                               `loglevel`                                               |                `2`                 |                    `0`                     |
| `NX_LOG_FILE`                   | Log file                                                                                |           `system`            |                                               `logfile`                                                | `/var/www/html/data/nextcloud.log` |           `/logs/nextcloud.log`            |
| `NX_LOG_FILE_AUDIT`             | Audit log file                                                                          |           `system`            |                                             `logfile_file`                                             |   `/var/www/html/data/audit.log`   |             `/logs/audit.log`              |
| `NX_LOG_DATE_FORMAT`            | Log date format                                                                         |           `system`            |                                            `logdateformat`                                             |           `d/m/Y H:i:s`            |              `D d/m/Y H:i:s`               |
| `NX_LOG_TIMEZONE`               | Log timezone                                                                            |           `system`            |                                             `logtimezone`                                              |               `$TZ`                |              `Europe/Athens`               |
| `NX_OVERWRITE_HOST`             | Overwrite host                                                                          |           `system`            |                                            `overwritehost`                                             |                `""`                |            `cloud.example.com`             |
| `NX_OVERWRITE_CLI_URL`          | Overwrite CLI URL                                                                       |           `system`            |                                          `overwrite.cli.url`                                           |                `""`                |        `https://cloud.example.com`         |
| `NX_OVERWRITE_PROTOCOL`         | Overwrite protocol                                                                      |           `system`            |                                          `overwriteprotocol`                                           |                `""`                |                  `https`                   |
| `NX_TRUSTED_DOMAINS`            | Space Separated list of Trusted domains                                                 |           `system`            |                                           `trusted_domains`                                            |                `""`                |       `localhost cloud.example.com`        |
| `NX_TRUSTED_PROXIES`            | Space Separated list of Trusted proxies                                                 |           `system`            |                                           `trusted_proxies`                                            |                `""`                | `10.0.0.0/8 172.16.0.0./12 192.168.0.0/16` |

> Visit Nextcloud official documentation for more information about each `Config key`
